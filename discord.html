<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminale - Discord</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
</head>
<body>
    <div id="terminal" class="social-page">
        <h1 class="glitch" data-text="[SERVER DISCORD]">[SERVER DISCORD]</h1>
        <p>Connessione all'invito [8kmQZDx8wE]...</p>
        
        <a href="https://discord.com/invite/8kmQZDx8wE" target="_blank" class="retro-button">[ ENTRA NEL SERVER ]</a>
        <a href="index.html" class="retro-button back">[ TORNA AL MENU ]</a>

        <div class="stats-box">
            <h2>STATISTICHE IN TEMPO REALE</h2>
            <p id="loading-stats">Caricamento dati server...</p>
            <p>Membri Online: <span id="discord-online">--</span></p>
            <p>Membri Totali: <span id="discord-total">--</span></p>
        </div>
    </div>

    <script>
        // ID del tuo server Discord: 816004126966808606 (trovato dall'invito)
        const serverID = "816004126966808606";
        const widgetURL = `https://discord.com/api/guilds/${serverID}/widget.json`;

        fetch(widgetURL)
            .then(response => response.json())
            .then(data => {
                document.getElementById('loading-stats').style.display = 'none';
                document.getElementById('discord-online').textContent = data.presence_count;
                // Nota: il widget.json non fornisce i membri totali, ma solo quelli online.
                // Se abiliti il widget nelle impostazioni del tuo server, potresti avere piÃ¹ dati.
                // Per ora, omettiamo i "totali" se non disponibili.
                
                // Se l'API restituisce i membri totali (spesso non lo fa a meno che il widget non sia esteso)
                if (data.members) {
                     document.getElementById('discord-total').textContent = data.members.length;
                } else {
                     document.getElementById('discord-total').textContent = "N/A (abilita widget)";
                }
            })
            .catch(error => {
                console.error("Errore fetch Discord:", error);
                document.getElementById('loading-stats').textContent = "Errore nel caricamento del widget.";
            });
    </script>
</body>
</html>
